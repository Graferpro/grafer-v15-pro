<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Grafer Pro - V15 Secure</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { darkBg: '#050505', cardDark: '#121212' },
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    animation: { 
                        'breathe': 'breathe 4s ease-in-out infinite',
                        'scroll': 'scroll 20s linear infinite'
                    },
                    keyframes: {
                        breathe: {
                            '0%, 100%': { boxShadow: '0 0 5px var(--theme-color), inset 0 0 0 transparent', borderColor: 'rgba(255,255,255,0.1)' },
                            '50%': { boxShadow: '0 0 20px var(--theme-color), inset 0 0 10px rgba(var(--theme-rgb), 0.2)', borderColor: 'var(--theme-color)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        :root { --theme-color: #6366f1; --theme-rgb: 99, 102, 241; }
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; user-select: none; }
        .mesh-bg { background-color: #f8fafc; background-image: radial-gradient(at 0% 0%, rgba(var(--theme-rgb), 0.08) 0, transparent 60%); }
        body.dark .mesh-bg { background-color: #050505; background-image: radial-gradient(at 50% 0%, rgba(var(--theme-rgb), 0.15) 0, transparent 70%); }

        .glass { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(16px); border: 1px solid rgba(0,0,0,0.05); }
        .dark .glass { background: rgba(20, 20, 20, 0.8); border: 1px solid rgba(255,255,255,0.08); }

        .neon-box { transition: all 0.3s; border: 1px solid transparent; }
        body:not(.no-effects) .neon-box { animation: breathe 4s infinite ease-in-out; }

        .premium-flag { box-shadow: 0 4px 10px rgba(0,0,0,0.2); border: 2px solid white; object-fit: cover; }
        .dark .premium-flag { border: 2px solid #333; }
        
        .company-logo { background: white; padding: 2px; border-radius: 50%; width: 40px; height: 40px; object-fit: contain; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .page-section { display: none; animation: fadeUp 0.3s ease-out; }
        .page-section.active { display: block; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        .hide-scroll::-webkit-scrollbar { display: none; }
        .color-dot { width: 32px; height: 32px; border-radius: 50%; border: 2px solid transparent; transition: transform 0.2s; cursor: pointer; }
        .color-dot.active { transform: scale(1.2); border-color: white; box-shadow: 0 0 10px var(--theme-color); }
    </style>
</head>
<body class="mesh-bg text-slate-900 dark:text-white pb-28 transition-colors duration-300">

    <div id="overlay" onclick="closeDrawers()" class="fixed inset-0 bg-black/80 z-50 hidden backdrop-blur-md transition-opacity"></div>
    
    <div id="bottom-drawer" class="fixed inset-x-0 bottom-0 z-[60] bg-white dark:bg-cardDark rounded-t-[2.5rem] transform translate-y-full transition-transform duration-300 max-h-[80vh] flex flex-col border-t border-white/10 shadow-2xl">
        <div class="p-6 pb-2 flex justify-between items-center">
            <h3 class="text-xl font-bold tracking-tight" id="drawer-title">SeÃ§iniz</h3>
            <button onclick="closeDrawers()" class="bg-gray-100 dark:bg-white/10 p-2 rounded-full hover:rotate-90 transition"><i data-lucide="x" size="20"></i></button>
        </div>
        <div class="p-4 overflow-y-auto hide-scroll space-y-2" id="drawer-content"></div>
    </div>

    <header class="sticky top-0 z-40 px-6 py-4 flex justify-between items-center glass mb-4 border-b border-gray-100 dark:border-white/5 backdrop-blur-xl">
        <div>
            <span class="text-[10px] font-extrabold text-[var(--theme-color)] tracking-widest block uppercase" style="color: var(--theme-color);">GRAFER V15 PRO</span>
            <span class="font-bold text-xl tracking-tight flex items-center gap-2" id="header-title">Piyasa</span>
        </div>
        <div class="flex gap-2">
            <button onclick="nav('converter')" class="p-2 rounded-full glass hover:bg-white/50 transition">
                <i data-lucide="arrow-left-right" size="20" style="color: var(--theme-color);"></i>
            </button>
            <button onclick="openDrawer('currency')" class="glass px-3 py-1.5 rounded-full flex items-center gap-2 hover:bg-white/50 transition border border-[var(--theme-color)]" style="border-color: var(--theme-color);">
                <img id="header-flag" src="https://flagcdn.com/w40/pl.png" class="w-5 h-5 rounded-full premium-flag">
                <span class="font-bold text-sm" id="header-curr">PLN</span>
            </button>
        </div>
    </header>

    <main id="page-home" class="page-section active px-4">
        <div class="flex justify-between items-end mb-3 px-1">
            <h3 class="font-bold text-lg">Emtia & Metaller</h3>
            <button onclick="openDrawer('metals')" class="text-xs font-bold text-slate-400 hover:text-white flex items-center gap-1"><i data-lucide="sliders-horizontal" size="12"></i> DÃ¼zenle</button>
        </div>
        <div class="grid grid-cols-2 gap-3 mb-6" id="metals-grid"></div>

        <div class="mb-6">
            <h3 class="font-bold text-lg mb-3 px-1 flex items-center gap-2">
                <i data-lucide="trending-up" class="text-green-500"></i> DÃ¼nya Devleri (Stocks)
            </h3>
            <div class="space-y-3" id="stocks-list">
                <div class="glass p-4 rounded-xl text-center text-xs text-slate-400 animate-pulse">Veriler gÃ¼venli sunucudan yÃ¼kleniyor...</div>
            </div>
        </div>

        <div class="glass rounded-[2rem] p-5 shadow-lg mb-6 border border-white/5 relative overflow-hidden">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-3">
                    <img src="https://flagcdn.com/w80/us.png" class="w-8 h-8 rounded-full premium-flag">
                    <div>
                        <span class="font-bold text-sm block">USD/<span class="base-curr-text">PLN</span></span>
                        <span class="text-[10px] text-green-500 font-bold">+0.45%</span>
                    </div>
                </div>
                <p id="chart-price" class="font-mono font-black text-2xl tracking-tight" style="color: var(--theme-color);">---</p>
            </div>
            <div class="h-[180px] w-full"><canvas id="mainChart"></canvas></div>
        </div>
    </main>

    <main id="page-converter" class="page-section px-4 pt-10">
        <h2 class="text-3xl font-black mb-8 text-center">HÄ±zlÄ± Ã‡evirici</h2>
        <div class="glass rounded-[2.5rem] p-8 relative neon-box">
            <div class="text-center mb-8">
                <label class="text-xs font-bold text-slate-400 uppercase mb-2 block">Miktar</label>
                <input type="number" id="conv-amount" value="1" oninput="runConvert()" class="w-full bg-transparent text-center text-6xl font-black outline-none border-b-2 border-slate-100 dark:border-white/10 focus:border-[var(--theme-color)] transition pb-2">
            </div>
            <div class="flex justify-between items-center gap-4 mb-8">
                <button onclick="openDrawer('curr_from')" class="flex-1 glass p-4 rounded-2xl flex flex-col items-center gap-2 hover:bg-white/50 transition">
                    <img id="flag-from" src="" class="w-10 h-10 rounded-full premium-flag">
                    <span id="code-from" class="font-bold text-xl">USD</span>
                </button>
                <i data-lucide="arrow-right" class="text-slate-400"></i>
                <button onclick="openDrawer('curr_to')" class="flex-1 glass p-4 rounded-2xl flex flex-col items-center gap-2 hover:bg-white/50 transition">
                    <img id="flag-to" src="" class="w-10 h-10 rounded-full premium-flag">
                    <span id="code-to" class="font-bold text-xl">PLN</span>
                </button>
            </div>
            <div class="text-center bg-slate-50 dark:bg-white/5 p-6 rounded-3xl">
                <p class="text-xs font-bold text-slate-400 uppercase mb-1">SONUÃ‡</p>
                <p id="conv-result" class="text-3xl font-black" style="color: var(--theme-color);">---</p>
            </div>
        </div>
    </main>

    <main id="page-settings" class="page-section px-4">
        <h2 class="text-2xl font-bold mb-6">Ayarlar</h2>
        <div class="glass rounded-3xl p-5 mb-4">
            <span class="text-xs font-bold text-slate-400 uppercase mb-4 block">Tema Rengi</span>
            <div class="flex justify-between px-2">
                <div onclick="setTheme('#6366f1')" class="color-dot bg-[#6366f1] active"></div>
                <div onclick="setTheme('#ec4899')" class="color-dot bg-[#ec4899]"></div>
                <div onclick="setTheme('#ef4444')" class="color-dot bg-[#ef4444]"></div>
                <div onclick="setTheme('#22c55e')" class="color-dot bg-[#22c55e]"></div>
                <div onclick="setTheme('#eab308')" class="color-dot bg-[#eab308]"></div>
                <div onclick="setTheme('#06b6d4')" class="color-dot bg-[#06b6d4]"></div>
            </div>
        </div>
        <div class="glass rounded-3xl p-5 mb-4 flex justify-between items-center">
            <div><span class="font-bold block">Neon Efektleri</span><span class="text-xs text-slate-400">Pil tasarrufu iÃ§in kapatÄ±n</span></div>
            <label class="relative inline-block w-12 h-7 cursor-pointer">
                <input type="checkbox" id="effect-toggle" checked onchange="toggleEffects(this.checked)" class="sr-only peer">
                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all" style="background-color: gray;"></div>
            </label>
        </div>
        <div class="glass rounded-3xl p-2">
            <button onclick="openDrawer('lang')" class="w-full p-4 flex justify-between items-center border-b border-gray-100 dark:border-white/5 hover:bg-white/5 transition">
                <span class="font-bold flex gap-3"><i data-lucide="globe"></i> Dil</span>
                <span class="font-bold text-sm bg-gray-100 dark:bg-white/10 px-2 py-1 rounded" id="curr-lang-code">TR</span>
            </button>
            <button onclick="openDrawer('currency')" class="w-full p-4 flex justify-between items-center hover:bg-white/5 transition">
                <span class="font-bold flex gap-3"><i data-lucide="coins"></i> Para Birimi</span>
                <span class="font-bold text-sm bg-gray-100 dark:bg-white/10 px-2 py-1 rounded base-curr-text">PLN</span>
            </button>
        </div>
    </main>

    <nav class="fixed bottom-0 w-full bg-white/95 dark:bg-cardDark/95 backdrop-blur-xl border-t border-gray-100 dark:border-white/5 pb-8 pt-4 px-8 z-40 flex justify-between items-center shadow-2xl">
        <button onclick="nav('home')" id="nav-home" class="nav-btn active flex flex-col items-center gap-1 transition hover:scale-110"><i data-lucide="layout-grid"></i><span class="text-[9px] font-bold uppercase">Piyasa</span></button>
        <button onclick="nav('converter')" id="nav-converter" class="nav-btn text-slate-400 flex flex-col items-center gap-1 transition hover:scale-110"><i data-lucide="arrow-left-right"></i><span class="text-[9px] font-bold uppercase">Ã‡evirici</span></button>
        <button onclick="nav('settings')" id="nav-settings" class="nav-btn text-slate-400 flex flex-col items-center gap-1 transition hover:scale-110"><i data-lucide="settings"></i><span class="text-[9px] font-bold uppercase">Ayarlar</span></button>
    </nav>

    <script>
        // --- ðŸ”’ GÃœVENLÄ° KONFÄ°GÃœRASYON ---
        // Not: Burada artÄ±k API anahtarlarÄ± YOK. Hepsi /api/proxy Ã¼zerinden Ã§aÄŸrÄ±lÄ±yor.
        
        const FLAGS = { 'USD':'us', 'EUR':'eu', 'GBP':'gb', 'TRY':'tr', 'PLN':'pl', 'GEL':'ge', 'RUB':'ru', 'JPY':'jp', 'CNY':'cn', 'CHF':'ch', 'CAD':'ca', 'AUD':'au' };
        const METAL_INFO = { 'xau': {n:'AltÄ±n',i:'gem',c:'#eab308'}, 'xag': {n:'GÃ¼mÃ¼ÅŸ',i:'shield',c:'#94a3b8'}, 'xpt': {n:'Platin',i:'disc',c:'#2dd4bf'}, 'xpd': {n:'Paladyum',i:'aperture',c:'#f472b6'} };
        const STOCKS = [{ sym: 'AAPL', name: 'Apple Inc.' }, { sym: 'TSLA', name: 'Tesla Inc.' }, { sym: 'NVDA', name: 'Nvidia Corp.' }, { sym: 'AMZN', name: 'Amazon.com' }, { sym: 'MSFT', name: 'Microsoft' }];

        let state = {
            lang: localStorage.getItem('grafer_lang') || 'tr',
            base: localStorage.getItem('grafer_base') || 'PLN',
            activeMetals: JSON.parse(localStorage.getItem('grafer_metals')) || ['xau', 'xag', 'xpt', 'xpd'],
            rates: {},
            metalPrices: { xau:0, xag:0, xpt:0, xpd:0 },
            stockData: {},
            convFrom: 'USD', convTo: 'PLN'
        };
        let charts = {};

        window.onload = async () => {
            lucide.createIcons();
            const color = localStorage.getItem('grafer_color') || '#6366f1'; setTheme(color);
            const fx = localStorage.getItem('grafer_effects') !== 'off'; document.getElementById('effect-toggle').checked = fx; toggleEffects(fx);
            if(window.matchMedia('(prefers-color-scheme: dark)').matches) document.documentElement.classList.add('dark');

            // ðŸš€ ARTIK GÃœVENLÄ° PROXY ÃœZERÄ°NDEN Ã‡AÄžIRIYORUZ
            await fetchRates();
            await fetchMetals();
            fetchStocks(); 
            
            renderMetals();
            initChart('mainChart');
            updateUI();
            startChartSim('mainChart');
        };

        // --- FETCH STOCKS (PROXY) ---
        async function fetchStocks() {
            for(let s of STOCKS) {
                try {
                    // Finnhub yerine kendi backendimize soruyoruz
                    const res = await fetch(`/api/proxy?type=stock&symbol=${s.sym}`);
                    const data = await res.json();
                    state.stockData[s.sym] = { c: data.c, dp: data.dp };
                } catch(e) { console.error("Stock Hata", e); }
            }
            renderStocks();
        }

        function renderStocks() {
            const container = document.getElementById('stocks-list');
            container.innerHTML = STOCKS.map(s => {
                const data = state.stockData[s.sym];
                if(!data) return ''; 
                const localPrice = convert(data.c || 0);
                const dp = data.dp || 0;
                const isUp = dp >= 0;
                return `
                <div class="glass p-3 rounded-2xl flex items-center justify-between hover:bg-white/5 transition">
                    <div class="flex items-center gap-3">
                        <img src="https://logo.clearbit.com/${s.name.split(' ')[0].toLowerCase()}.com" class="company-logo" onerror="this.src='https://via.placeholder.com/40'">
                        <div><span class="font-bold text-sm block">${s.sym}</span><span class="text-[10px] text-slate-400">${s.name}</span></div>
                    </div>
                    <div class="text-right">
                        <span class="block font-bold font-mono">${localPrice.toLocaleString(undefined, {maximumFractionDigits:2})} <span class="text-[10px] base-curr-text">${state.base}</span></span>
                        <span class="inline-flex items-center gap-1 text-[10px] font-bold px-2 py-0.5 rounded-full ${isUp?'bg-green-500/10 text-green-500':'bg-red-500/10 text-red-500'}">
                            <i data-lucide="${isUp?'trending-up':'trending-down'}" size="10"></i> ${dp.toFixed(2)}%
                        </span>
                    </div>
                </div>`;
            }).join('');
            lucide.createIcons();
            document.querySelectorAll('.base-curr-text').forEach(e => e.innerText = state.base);
        }

        // --- FETCH METALS (PROXY) ---
        async function fetchMetals() {
            const metals = ['XAU', 'XAG', 'XPT', 'XPD'];
            for(let m of metals) {
                try {
                    // GoldAPI yerine backendimize soruyoruz
                    const res = await fetch(`/api/proxy?type=gold&symbol=${m}`);
                    const data = await res.json();
                    if(data.price) state.metalPrices[m.toLowerCase()] = data.price;
                } catch(e){}
            }
        }

        // --- FETCH RATES (PROXY) ---
        async function fetchRates() {
            try {
                // FastForex yerine backendimize soruyoruz
                const res = await fetch(`/api/proxy?type=forex`);
                const data = await res.json();
                if(data.results) state.rates = data.results;
            } catch(e){} 
        }

        // --- UI & LOGIC ---
        function renderMetals() {
            const grid = document.getElementById('metals-grid');
            grid.innerHTML = state.activeMetals.map(m => {
                const info = METAL_INFO[m];
                const price = convert(state.metalPrices[m] || 0);
                return `
                <div class="glass neon-box rounded-[1.5rem] p-4 relative overflow-hidden active:scale-95 transition group">
                    <div class="absolute -right-4 -top-4 w-16 h-16 rounded-full opacity-10" style="background: ${info.color}"></div>
                    <div class="flex items-center gap-2 mb-3">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center bg-gray-50 dark:bg-white/10 text-[${info.color}]"><i data-lucide="${info.icon}" size="16" color="${info.color}"></i></div>
                        <span class="font-bold text-xs opacity-50 uppercase">${m}/Ons</span>
                    </div>
                    <h3 class="text-xl font-extrabold mb-1">${info.name}</h3>
                    <p class="font-mono font-bold opacity-80">${price.toLocaleString(undefined, {maximumFractionDigits:2})}</p>
                </div>`;
            }).join('');
            lucide.createIcons();
        }

        function convert(usdVal) { return usdVal * (state.rates[state.base] || 1); }
        function updateUI() {
            document.querySelectorAll('.base-curr-text').forEach(e => e.innerText = state.base);
            document.getElementById('header-curr').innerText = state.base;
            document.getElementById('header-flag').src = `https://flagcdn.com/w40/${FLAGS[state.base]||'us'}.png`;
            renderMetals(); renderStocks(); runConvert();
        }

        // --- SYSTEM ---
        function openDrawer(mode) {
            document.getElementById('bottom-drawer').classList.remove('translate-y-full');
            document.getElementById('overlay').classList.remove('hidden');
            const content = document.getElementById('drawer-content');
            const title = document.getElementById('drawer-title');

            if(mode === 'metals') {
                title.innerText = "GÃ¶rÃ¼necek Metaller";
                const allMetals = ['xau', 'xag', 'xpt', 'xpd'];
                content.innerHTML = allMetals.map(m => {
                    const isActive = state.activeMetals.includes(m);
                    return `
                    <div onclick="toggleMetal('${m}')" class="flex items-center justify-between p-4 glass rounded-2xl cursor-pointer mb-2">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-white/10 flex items-center justify-center"><i data-lucide="${METAL_INFO[m].icon}" size="16"></i></div><span class="font-bold text-lg">${METAL_INFO[m].name}</span></div>
                        <div class="w-6 h-6 rounded-full border-2 ${isActive ? 'bg-green-500 border-green-500' : 'border-gray-300'} flex items-center justify-center">${isActive ? '<i data-lucide="check" size="14" class="text-white"></i>' : ''}</div>
                    </div>`;
                }).join('');
            } else if (mode.startsWith('curr')) {
                title.innerText = "Para Birimi SeÃ§";
                content.innerHTML = Object.keys(FLAGS).map(c => `
                    <button onclick="setCurr('${c}', '${mode}')" class="w-full p-3 flex gap-4 hover:bg-black/5 rounded-xl items-center mb-1">
                        <img src="https://flagcdn.com/w40/${FLAGS[c]}.png" class="w-8 h-8 rounded-full premium-flag">
                        <span class="font-bold text-lg">${c}</span>
                    </button>`).join('');
            }
            lucide.createIcons();
        }

        function toggleMetal(m) { if(state.activeMetals.includes(m)) state.activeMetals = state.activeMetals.filter(x => x !== m); else state.activeMetals.push(m); localStorage.setItem('grafer_metals', JSON.stringify(state.activeMetals)); openDrawer('metals'); renderMetals(); }
        function setCurr(code, mode) { if(mode === 'currency') { state.base = code; localStorage.setItem('grafer_base', code); updateUI(); } else if (mode === 'curr_from') { state.convFrom = code; runConvert(); } else if (mode === 'curr_to') { state.convTo = code; runConvert(); } closeDrawers(); }
        function closeDrawers() { document.getElementById('bottom-drawer').classList.add('translate-y-full'); document.getElementById('overlay').classList.add('hidden'); }
        function runConvert() { document.getElementById('flag-from').src = `https://flagcdn.com/w40/${FLAGS[state.convFrom]||'us'}.png`; document.getElementById('code-from').innerText = state.convFrom; document.getElementById('flag-to').src = `https://flagcdn.com/w40/${FLAGS[state.convTo]||'pl'}.png`; document.getElementById('code-to').innerText = state.convTo; const amount = parseFloat(document.getElementById('conv-amount').value) || 0; const res = (amount / (state.rates[state.convFrom]||1)) * (state.rates[state.convTo]||1); document.getElementById('conv-result').innerText = res.toLocaleString(undefined, {maximumFractionDigits:2}); }
        function setTheme(hex) { document.documentElement.style.setProperty('--theme-color', hex); const r = parseInt(hex.slice(1,3),16), g = parseInt(hex.slice(3,5),16), b = parseInt(hex.slice(5,7),16); document.documentElement.style.setProperty('--theme-rgb', `${r},${g},${b}`); localStorage.setItem('grafer_color', hex); document.querySelectorAll('.color-dot').forEach(d => d.classList.toggle('active', d.getAttribute('onclick').includes(hex))); if(document.getElementById('effect-toggle').checked) document.querySelector('#effect-toggle ~ div').style.backgroundColor = hex; if(charts['mainChart']) { charts['mainChart'].data.datasets[0].borderColor = hex; charts['mainChart'].data.datasets[0].backgroundColor = hex+'20'; charts['mainChart'].update(); } nav(document.querySelector('.nav-btn.active').id.replace('nav-','')); }
        function toggleEffects(isOn) { document.body.classList.toggle('no-effects', !isOn); localStorage.setItem('grafer_effects', isOn?'on':'off'); document.querySelector('#effect-toggle ~ div').style.backgroundColor = isOn ? getComputedStyle(document.documentElement).getPropertyValue('--theme-color') : 'gray'; }
        function nav(page) { document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active')); document.getElementById('page-' + page).classList.add('active'); document.querySelectorAll('.nav-btn').forEach(b => { b.style.color = '#94a3b8'; b.classList.remove('active'); }); const btn = document.getElementById('nav-' + page); if(btn) { btn.style.color = getComputedStyle(document.documentElement).getPropertyValue('--theme-color'); btn.classList.add('active'); } }
        function initChart(id) { const ctx = document.getElementById(id).getContext('2d'); const color = getComputedStyle(document.documentElement).getPropertyValue('--theme-color'); charts[id] = new Chart(ctx, { type: 'line', data: { labels: Array(20).fill(''), datasets: [{ data: Array(20).fill(1).map(x=>x+Math.random()), borderColor: color, borderWidth: 3, backgroundColor: color+'20', fill: true, tension: 0.4, pointRadius:0 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } } }); }
        function startChartSim(id) { setInterval(() => { const c = charts[id]; const next = c.data.datasets[0].data[19] * (1 + (Math.random()-0.5)*0.002); c.data.datasets[0].data.shift(); c.data.datasets[0].data.push(next); c.update(); document.getElementById('chart-price').innerText = next.toFixed(4); }, 2000); }
    </script>
</body>
</html>
